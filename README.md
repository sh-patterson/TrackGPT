# TrackGPT

**Automated video & audio analysis, transcription, and targeted summarization**

---

## Overview

TrackGPT is a command-line tool that automates the process of downloading online videos or audio, transcribing the content, and generating a focused summary of statements made by a specified individual. Ideal for researchers, journalists, and transparency advocates, TrackGPT helps you:

- Save time by skimming long recordings
- Pinpoint exact quotes from a target speaker
- Track recurring claims or positions across multiple recordings

---

## Features

- **Content Download**  
  Uses `yt-dlp` to fetch audio directly from URLs (e.g., YouTube, podcasts). Requires `ffmpeg` for audio extraction.

- **High-Quality Transcription**  
  Leverages OpenAI’s Whisper model to produce accurate plain text transcripts.

- **Targeted Statement Extraction**  
  Analyzes the transcript using an LLM (like GPT-4o-mini) to filter for factual statements and claims made *by your specified target*.

- **Hot-Button Topic Detection**  
  Identifies if the target discussed key political issues (climate change, immigration, healthcare, etc.) and provides direct quotes.

- **Configurable Output**  
  Saves two plaintext files in the specified output directory:
  - `<safe_target_name>_<timestamp>_transcript.txt`
  - `<safe_target_name>_<timestamp>_analysis.txt`

---

## Prerequisites

1.  **Python 3.8+**  
    Install from [python.org](https://www.python.org/).

2.  **yt-dlp & ffmpeg**  
    These external tools are required for downloading and processing audio.
    -   `yt-dlp`: [Installation Guide](https://github.com/yt-dlp/yt-dlp#installation)
    -   `ffmpeg`: [Download & Setup](https://ffmpeg.org/download.html)
    *Ensure both command-line tools are installed and accessible in your system's PATH.*

3.  **OpenAI API Key**
    -   Required for transcription (Whisper) and analysis (GPT model).
    -   Sign up at [openai.com](https://openai.com/).
    -   *Note: Using the OpenAI API may incur costs depending on usage. Check OpenAI's pricing.*
    -   Create a file named `.env` in the project root directory with your API key:
        ```dotenv
        OPENAI_API_KEY=your_openai_api_key_here
        # Optional: Override default models
        # WHISPER_MODEL=whisper-1
        # ANALYSIS_MODEL=gpt-4o-mini
        ```

---

## Installation

```bash
# 1. Clone the repository (replace with the actual URL if needed)
# git clone https://github.com/your-username/TrackGPT.git
# cd TrackGPT

# 2. Install Python dependencies
pip install -r requirements.txt
```

*(Ensure you are in the project's root directory where `requirements.txt` is located before running pip install)*

---

## Usage

```bash
python main.py <URL> "<Target Name>" [options]
```

-   `<URL>`: Link to the video or audio source (e.g., YouTube, podcast). **Enclose in quotes** if the URL contains special characters like `&`.
-   `<Target Name>`: The exact name of the person or entity whose statements you want to analyze (e.g., `"Jane Doe"`). **Enclose in quotes** if the name contains spaces.

**Common Options**

| Flag                    | Description                                            | Default Value         |
| :---------------------- | :----------------------------------------------------- | :-------------------- |
| `-o`, `--output_dir <dir>` | Specify the directory to save output files          | `output/`             |
| `--skip_download`       | Skip download (requires existing audio file)           | `False`               |
| `--skip_transcription`  | Skip transcription (requires existing transcript file) | `False`               |
| `--skip_analysis`       | Skip analysis step                                     | `False`               |
| `-v`, `--verbose`       | Enable detailed debug logging                          | `False`               |
| `-h`, `--help`          | Show this help message and exit                        |                       |

**Example**

```bash
python main.py \
  "https://www.youtube.com/watch?v=abcdef12345" \
  "John Smith" \
  -o results/john_smith -v
```

This command:
1.  Downloads audio from the YouTube video.
2.  Transcribes the audio using Whisper.
3.  Analyzes the transcript focusing on statements by "John Smith".
4.  Saves the output files (`John_Smith_..._transcript.txt` and `John_Smith_..._analysis.txt`) into the `results/john_smith` directory.
5.  Prints verbose logs during execution.

---

## Output Files

Located in the specified output directory (`output/` by default):

1.  **`..._transcript.txt`**
    -   Contains the full, plain text transcription generated by Whisper.
2.  **`..._analysis.txt`**
    -   Contains the LLM-generated analysis, typically including:
        -   A section listing factual statements attributed to the target.
        -   A section identifying any hot-button political issues discussed by the target, along with supporting quotes from the transcript.

You can open these `.txt` files with any standard text editor (e.g., VS Code, Notepad, TextEdit).

---

## Troubleshooting

-   **“`yt-dlp` not found” / “`ffmpeg` not found”**
    -   Ensure the respective command-line tool is installed correctly.
    -   Verify that the directory containing the executable (`yt-dlp` or `ffmpeg`) is listed in your system's `PATH` environment variable. You might need to restart your terminal/command prompt after installation or PATH modification.

-   **Transcription / Analysis Errors (API Key / OpenAI Issues)**
    -   **Check API Key:** Double-check that the `OPENAI_API_KEY` in your `.env` file is correct and doesn't have extra spaces or characters.
    -   **Check Account Status:** Log in to your OpenAI account dashboard to ensure your account is active, has sufficient funds/credits, and is not hitting usage limits.
    -   **Network Issues:** Ensure you have a stable internet connection. Firewalls could potentially block API requests.

-   **Permission errors writing files**
    -   Make sure the script has permission to create directories and write files in the location specified by `--output_dir`. Try using a directory within your user's home folder.

-   **File Not Found Errors (when using skip options)**
    -   If using `--skip_download`, ensure an audio file with the expected name (`<safe_target_name>_<timestamp>.<audio_format>`) exists in the output directory.
    -   If using `--skip_transcription`, ensure the transcript file (`<safe_target_name>_<timestamp>_transcript.txt`) exists in the output directory. The timestamp needs to match the one used or expected for the audio file.

---

## Contributing

Contributions are welcome!

1.  Fork the repository.
2.  Create a feature branch (`git checkout -b feature/YourAmazingFeature`).
3.  Make your changes.
4.  Commit your changes (`git commit -m 'Add some AmazingFeature'`).
5.  Push to the branch (`git push origin feature/YourAmazingFeature`).
6.  Open a Pull Request.

Please try to adhere to the existing code style and consider adding tests for new functionality.

---

## License

This project is licensed under the MIT License - see the `LICENSE` file for details.
```
